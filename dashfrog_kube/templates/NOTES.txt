1. Get the application URL by running these commands:
{{- if .Values.httpRoute.enabled }}
{{- if .Values.httpRoute.hostnames }}
    export APP_HOSTNAME={{ .Values.httpRoute.hostnames | first }}
{{- else }}
    export APP_HOSTNAME=$(kubectl get --namespace {{(first .Values.httpRoute.parentRefs).namespace | default .Release.Namespace }} gateway/{{ (first .Values.httpRoute.parentRefs).name }} -o jsonpath="{.spec.listeners[0].hostname}")
  {{- end }}
{{- if and .Values.httpRoute.rules (first .Values.httpRoute.rules).matches (first (first .Values.httpRoute.rules).matches).path.value }}
    echo "Visit http://$APP_HOSTNAME{{ (first (first .Values.httpRoute.rules).matches).path.value }} to use your application"

    NOTE: Your HTTPRoute depends on the listener configuration of your gateway and your HTTPRoute rules.
    The rules can be set for path, method, header and query parameters.
    You can check the gateway configuration with 'kubectl get --namespace {{(first .Values.httpRoute.parentRefs).namespace | default .Release.Namespace }} gateway/{{ (first .Values.httpRoute.parentRefs).name }} -o yaml'
{{- end }}
{{- else if .Values.ingress.enabled }}
{{- range $host := .Values.ingress.hosts }}
  {{- range .paths }}
  http{{ if $.Values.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
{{- else }}
{{- if .Values.prometheus.enabled }}
# Prometheus is running. To access it:
  export PROMETHEUS_POD=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "component=prometheus" -o jsonpath="{.items[0].metadata.name}")
  echo "To access Prometheus, run:"
  kubectl --namespace {{ .Release.Namespace }} port-forward $PROMETHEUS_POD 9090:9090
  echo "Then visit http://localhost:9090"
{{- end }}

{{- if .Values.clickhouse.enabled }}
# ClickHouse is running. To access it:
  export CLICKHOUSE_POD=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "component=clickhouse" -o jsonpath="{.items[0].metadata.name}")
  echo "To access ClickHouse HTTP interface, run:"
  kubectl --namespace {{ .Release.Namespace }} port-forward $CLICKHOUSE_POD 8123:8123
  echo "Then visit http://localhost:8123"
{{- end }}

{{- if .Values.collector.enabled }}
# Collector is running. To access its debug endpoint:
  export COLLECTOR_POD=$(kubectl get pods --namespace {{ .Release.Namespace }} -l "component=collector" -o jsonpath="{.items[0].metadata.name}")
  echo "To access Collector debug endpoint, run:"
  kubectl --namespace {{ .Release.Namespace }} port-forward $COLLECTOR_POD 12001:12001
  echo "Then visit http://localhost:12001"
{{- end }}

# All services are running as ClusterIP. Use port-forwarding to access them from outside the cluster.
{{- end }}
